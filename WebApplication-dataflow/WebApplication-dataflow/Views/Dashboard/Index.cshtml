
@{
    ViewBag.Title = "Index";
}
@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
}
<h1>@ViewBag.Title</h1>
<hr />
<div ng-app="dataflowApp" ng-controller="dashboardController">
    <div class="row">
        <div class="col-sm-8">
            <div class="panel-group">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" href="#collapse1">Maintenance graphs</a>
                        </h4>
                    </div>
                    <div id="collapse1" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <div id="maintenanceGraph" google-chart chart="chartObject" style="height:600px; width:100%;"></div>
                            <p>
                                <div class="form-group">
                                    <label for="begin">Begin timestamp:</label>
                                    <input type="text" ng-model="beginTimestamp" class="form-control" id="begin">
                                </div>
                                <div class="form-group">
                                    <label for="end">End timestamp:</label>
                                    <input type="text" ng-model="endTimestamp" class="form-control" id="end">
                                </div>
                                <button type="button" ng-disabled="!hideLoadingMaintenance" ng-click="loadMaitenance()" class="btn btn-default">Update</button>
                                <button type="button" onclick="PdfGenerator.GenerateFromHtmlFancy('test', ['maintenanceGraph'])" class="btn btn-default">Generate pdf</button>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" href="#collapseMaintenance">Maintenance data</a>
                    </h4>
                </div>
                <div id="collapseMaintenance" class="panel-collapse collapse in">
                    <ul class="list-group">
                        <li class="list-group-item" ng-repeat="unit in maintenance" ng-if="unit.kilometersTravelled != -1">
                            {{ "Unit " + unit.unitId + " has driven " + unit.kilometersTravelled + " km"}}
                        </li>
                    </ul>
                    <img ng-hide="hideLoadingMaintenance" class="img-loader img-responsive" src="~/Content/Images/loading_dots.gif" />
                </div>
            </div>
        </div>

        <br />

        <div ng-controller="ConnectionController" class="col-sm-8">
            <div class="panel-group">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" href="#collapse1">Connection Piechart</a>
                        </h4>
                    </div>
                    <div id="collapse1" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <div google-chart chart="chartObject" style="height:600px; width:100%;"></div>
                            Total average: {{totalAverage}} seconds
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

@Scripts.Render("~/bundles/dashboardController")


